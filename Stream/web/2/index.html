<!DOCTYPE HTML>
<head>
	<script>
		function sync_server()
		{
			let xhr = new XMLHttpRequest();
			xhr.open("GET","/api/audio/sync_server",true);
			xhr.onload = function()
			{
				if(xhr.status==200)
				{
					console.log("Lets go!");
					window.setTimeout(function(){
						document.getElementById('player').play();},10000);
				}
				else
				{
					window.setTimeout(sync_server,400);
				}
			}
			xhr.send(null);

		}
		function enable_stream(x)
		{
			x.style.display = 'none';
			document.getElementById('player').style.display = 'block';
		}
	window.addEventListener("load",sync_server);
	</script>
</head>
<body>
	<center>
	<button onclick='enable_stream(this);' style='font-size: x-large;padding:1rem;width: 15rem;'>Enable Stream</button>
	<audio controls id='player' preload='auto' style='display: none;' src='audiowalk.mp3'></audio>	
	</center>
</body>
